!function(e,t){if("function"==typeof define&&define.amd)define(["module"],t);else if("undefined"!=typeof exports)t(module);else{var i={exports:{}};t(i),e.heyModal=i.exports}}(this,function(e){"use strict";e.exports=function(){var e=0,t={body:null,elem:null,target:null,events:{open:new Event("heyOpen"),close:new Event("heyClose")},content:{title:null,body:null},visibleClass:"modal--is-visible",bodyOverflowClass:"modal-body-no-scroll",init:function(){this.body=document.querySelector("body"),this.setTarget(),this.id=e,this.checkTarget()&&(this.build(),this.removeTarget(),this.setMaxHeight(),this.bindEvents())},on:function(e,t){this.comp.wrapper.addEventListener(e,t)},build:function(){var e={};e.wrapper=document.createElement("div"),e.wrapper.classList.add("modal"),e.wrapper.setAttribute("aria-hidden","true"),e.dialog=document.createElement("div"),e.dialog.classList.add("modal__dialog"),e.dialog.setAttribute("role","dialog"),e.dialog.setAttribute("aria-labelledby","modal__title-"+this.id),e.header=document.createElement("div"),e.header.classList.add("modal__header"),e.title=document.createElement("h3"),e.title.classList.add("modal__title"),e.title.id="modal__title-"+this.id,e.body=document.createElement("div"),e.body.classList.add("modal__body"),e.body.style.overflow="auto",e.closeBtn=document.createElement("button"),e.closeBtn.classList.add("modal__close"),e.closeBtn.setAttribute("type","button"),e.closeBtn.setAttribute("aria-label","Close"),e.header.appendChild(e.title),e.header.appendChild(e.closeBtn),e.dialog.appendChild(e.header),e.dialog.appendChild(e.body),e.wrapper.appendChild(e.dialog),this.comp=e,this.populate(),this.body.appendChild(e.wrapper)},populate:function(){var e=this;for(var t in this.content){if(!this.content[t]){var i=e.target.querySelector("[data-hey-"+t+"]");i&&(e.content[t]=i.innerHTML)}this.comp[t].innerHTML=this.content[t]}},setTarget:function(){this.elem.hasAttribute("data-hey")?this.target=document.querySelector(this.elem.getAttribute("data-hey")):this.elem.hasAttribute("href")&&this.elem.getAttribute("href").indexOf("#")>=0&&(this.target=document.querySelector(this.elem.getAttribute("href")))},checkTarget:function(){var e=void 0;try{if(!this.target||!this.target.nodeType)throw e=!1,new Error("No modal target given.");e=!0}catch(e){console.log(e)}return e},removeTarget:function(){this.target.remove()},setMaxHeight:function(){var e=getComputedStyle(this.comp.wrapper),t=this.comp.header.offsetHeight,i=this.comp.wrapper.offsetHeight,s="calc("+i+"px - ("+e.paddingTop+" + "+e.paddingTop+") - "+t+"px)";this.comp.body.style.maxHeight=s},bindEvents:function(){var e=this;this.comp.wrapper.addEventListener("touchmove",function(e){e.preventDefault()},!1),this.comp.body.addEventListener("touchmove",function(e){e.stopPropagation()},!1),window.addEventListener("resize",function(){e.setMaxHeight()}),this.elem.addEventListener("click",function(t){t.preventDefault(),e.open()}),this.comp.wrapper.addEventListener("click",this.close.bind(this)),this.comp.closeBtn.addEventListener("click",this.close.bind(this)),this.comp.dialog.addEventListener("click",function(e){e.stopPropagation()}),this.comp.wrapper.addEventListener("keydown",function(t){switch(t.keyCode){case 27:e.close();break;case 9:t.shiftKey?e.firstFocusable===document.activeElement&&(t.preventDefault(),e.lastFocusable.focus()):e.lastFocusable===document.activeElement&&(t.preventDefault(),e.firstFocusable.focus())}})},open:function(){this.comp.wrapper.classList.add(this.visibleClass),this.setPageScroll(!1),this.body.style.marginRight=this.measureScrollbar(),this.comp.wrapper.setAttribute("aria-hidden","false"),this.setLastFocusedElem(),this.setFocus(),this.comp.wrapper.dispatchEvent(this.events.open)},setFocus:function(){var e=this.comp.dialog.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');this.firstFocusable=e[0],this.lastFocusable=e[e.length-1],this.firstFocusable.focus()},setLastFocusedElem:function(){this.lastFocused=document.activeElement},close:function(){var e=this;this.comp.wrapper.classList.remove(this.visibleClass),this.lastFocused.focus();var t=function t(){e.setPageScroll(!0),e.body.style.marginRight=0,e.comp.wrapper.removeEventListener("transitionend",t),e.comp.wrapper.setAttribute("aria-hidden","true"),e.comp.wrapper.dispatchEvent(e.events.close)};this.comp.wrapper.addEventListener("transitionend",t)},setPageScroll:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.body.classList.remove(this.bodyOverflowClass):this.body.classList.add(this.bodyOverflowClass)},measureScrollbar:function(){var e=document.createElement("div");e.style.width=100,e.style.height=100,e.style.overflow="scroll",e.style.position="absolute",e.style.top=-9999,this.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;return this.body.removeChild(e),t}};return function(i,s){e+=1;var o=Object.assign(Object.create(t),{elem:i},s);return o.init(),o}}()});